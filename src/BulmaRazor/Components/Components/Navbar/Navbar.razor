@namespace BulmaRazor.Components
@inherits BulmaComponentBase
<nav @attributes="AdditionalAttributes" class="@clesses" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        @BrandSlot

        <a role="button" class="navbar-burger @activeClass" aria-label="menu" aria-expanded="false" data-target="@navBarId" @onclick="ToggleActive">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="@navBarId" class="navbar-menu @activeClass">
        <div class="navbar-start">
            @StartSlot
        </div>
        <div class="navbar-end">
            @EndSlot
        </div>
    </div>
</nav>

@code {
    string clesses => CssBuilder.Default("navbar")
        .AddClass(Color.Value, Color.Value)
        .AddClass("is-transparent", IsTransparent)
        .AddClass("is-spaced", IsSpaced)
        .AddClass(Fixed.Value, Fixed.Value)
        .Build();

    string activeClass = "";

    private Task ToggleActive()
    {
        if (activeClass.HasValue())
        {
            activeClass = "";
        }
        else
        {
            activeClass = "is-active";
        }

        return Task.CompletedTask;
    }

    string navBarId = "navbar_" + Guid.NewGuid().ToString("N");


    [Parameter]
    public Color Color { get; set; } = Color.White;

    [Parameter]
    public Fixed Fixed { get; set; } = Fixed.Default;

    [Parameter]
    public bool IsSpaced { get; set; }
    [Parameter]
    public bool IsTransparent { get; set; }

    [Parameter]
    public RenderFragment BrandSlot { get; set; }


    [Parameter]
    public RenderFragment StartSlot { get; set; }

    [Parameter]
    public RenderFragment EndSlot { get; set; }

}
